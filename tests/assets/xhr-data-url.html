<!DOCTYPE html>
<!--
  Copyright 2020 New Relic Corporation.
  PDX-License-Identifier: Apache-2.0
-->
<html>
  <head>
    <title>RUM Unit Test</title>
    {init}
    <script type="text/javascript">
      // Setting a deny list is necessary or `shouldCollectEvent` is never invoked.
      NREUM.init||(NREUM.init = {});
      NREUM.init.ajax||(NREUM.init.ajax = {});
      NREUM.init.ajax.deny_list = ["example.com"];
    </script>
    {config}
    {loader}

    <script type="text/javascript">
      var xhr = new XMLHttpRequest();
      xhr.addEventListener('load', function() {
        console.log(this.responseText);
      })
      xhr.open('GET', 'data:,Hello%2C%20World%21', true);
      xhr.send();
    </script>
    <script type="text/javascript">
      if (typeof fetch !== 'undefined') {
        fetch('data:,Hello%2C%20World%21').catch(console.error)
      }
    </script>
  </head>
  <body>
    This page makes an XHR call to a data URL, which has no hostname. Such a request should not cause the agent to error and should not be sent for collection.
  </body>
</html>
